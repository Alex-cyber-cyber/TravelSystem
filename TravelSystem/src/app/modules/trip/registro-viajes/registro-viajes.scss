@use '../../../../styles/variables.scss' as vars;
@use '../../../../styles/mixins.scss' as mix;

.viajes-form {
  font-family: vars.$font-family-sans-serif;
  padding-top: .5rem; padding-bottom: 2rem;

  .travel-card {
    border: 1px solid vars.$border-color;
    border-radius: vars.$border-radius-lg;
    background: vars.$white;
    @include mix.elevation(2);

    .card-header {
      background: vars.$gradient-primary;
      color: vars.$text-light;
      border-top-left-radius: vars.$border-radius-lg;
      border-top-right-radius: vars.$border-radius-lg;
      padding: 1rem 1.25rem;

      .badge {
        background: rgba(255,255,255,.15);
        border: 1px solid rgba(255,255,255,.25);
      }
    }

    .card-body { padding: 1.25rem; @media (min-width: 992px){ padding: 1.75rem; } }
  }

  .form-select, .form-control {
    border-radius: vars.$border-radius;
    border: 1px solid vars.$border-color;
    background: vars.$gray-100;
    transition: vars.$transition-base;
    &:focus {
      background: vars.$white;
      @include mix.focus-effect(vars.$primary);
    }
  }

  /* NG-SELECT â€” light theme */
  .ngs-collab {
    .ng-select-container {
      min-height: 3rem;
      border-radius: vars.$border-radius;
      border: 1px solid vars.$border-color;
      background: vars.$gray-100;
      transition: vars.$transition-base;
    }
    &.ng-select-focused .ng-select-container {
      background: vars.$white;
      @include mix.focus-effect(vars.$primary);
    }

    /* Pills seleccionados */
    .ng-value {
      background: rgba(vars.$primary, .12);
      border: 1px solid rgba(vars.$primary, .25);
      border-radius: 999px;
      padding: .15rem .5rem;
      margin-right: .25rem;
      .ng-value-label { color: vars.$dark; font-weight: 600; }
    }

    /* Panel dropdown */
    .ng-dropdown-panel {
      border: 1px solid vars.$border-color;
      border-radius: vars.$border-radius;
      box-shadow: vars.$shadow;
      background: vars.$white;
      .ng-dropdown-panel-items { max-height: 260px; }
      .ng-option {
        padding: .45rem .6rem;
        &.ng-option-marked { background: rgba(vars.$primary, .08); }
        &.ng-option-selected { background: rgba(vars.$primary, .12); }
      }
    }

    .opt-line {
      display: flex; align-items: center; gap: .6rem;
      background-color: rgba(vars.$danger, .12);
      .avatar {
        width: 28px; height: 28px; border-radius: 50%;
        display: inline-flex; align-items: center; justify-content: center;
        background: rgba(vars.$primary, .15); font-weight: 700;
      }
      .meta .title { font-weight: 600; }
      .meta .sub { font-size: .85rem; color: vars.$gray-700; }
      .chip {
        font-size: .75rem; padding: .15rem .5rem; border-radius: 999px;
        background: rgba(vars.$primary, .12); border: 1px solid rgba(vars.$primary, .25);
      }
      .chip-danger {
        background: rgba(vars.$danger, .12); border-color: rgba(vars.$danger, .35);
        color: vars.$danger;
      }
      &.opt-disabled { opacity: .6; }
    }

    .not-found { padding: .5rem .75rem; color: vars.$gray-700; }
  }

  .summary-bar {
    position: sticky; bottom: 0;
    display: flex; flex-wrap: wrap; gap: .75rem 1.5rem;
    padding: .75rem 1rem; border-radius: vars.$border-radius;
    background: vars.$white; border: 1px solid vars.$border-color;
    @include mix.elevation(1);

    .summary-item {
      min-width: 160px;
      .label { display: block; font-size: .8rem; color: vars.$gray-700; }
      .value { font-weight: 700; font-size: 1.05rem; }
    }

    .btn-gradient { @include mix.gradient-button(vars.$gradient-primary); }
  }
}

/* DARK THEME */
:host-context(.dark-theme) .viajes-form {

  .travel-card {
    background: vars.$darken; border-color: rgba(255,255,255,.08);
    .card-header { background: vars.$gradient-dark; }
    .card-body { color: vars.$text-light; }
  }

  .form-select, .form-control {
    background: rgba(255,255,255,.06);
    color: vars.$text-light;
    border-color: rgba(255,255,255,.18);
    &::placeholder { color: rgba(255,255,255,.55); }
    &:focus { background: rgba(255,255,255,.08); }
  }
  .form-select option { background: vars.$darken; color: vars.$text-light; }

  .ngs-collab {
    .ng-select-container {
      background: rgba(255,255,255,.06);
      border-color: rgba(255,255,255,.18);
      color: vars.$text-light;
    }
    &.ng-select-focused .ng-select-container { background: rgba(255,255,255,.08); }

    .ng-value {
      background: rgba(vars.$primary, .22);
      border-color: rgba(vars.$primary, .35);
      .ng-value-label { color: vars.$white; }
    }

    .ng-dropdown-panel {
      background: vars.$darken;
      border-color: rgba(255,255,255,.18);
      .ng-option {
        color: vars.$text-light;
        &.ng-option-marked { background: rgba(vars.$primary, .18); }
        &.ng-option-selected { background: rgba(vars.$primary, .22); }
      }
    }

    .opt-line .meta .sub { color: rgba(255,255,255,.7); }
  }

  .summary-bar {
    background: vars.$darken; border-color: rgba(255,255,255,.12);
    .label { color: rgba(255,255,255,.7); }
  }

  .btn.btn-outline-secondary {
    color: vars.$light; border-color: rgba(255,255,255,.3);
    &:hover { background: rgba(255,255,255,.08); }
  }
}
